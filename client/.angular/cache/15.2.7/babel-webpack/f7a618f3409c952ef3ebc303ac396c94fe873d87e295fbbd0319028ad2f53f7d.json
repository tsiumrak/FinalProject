{"ast":null,"code":"// import { Component, OnInit } from \"@angular/core\";\n// import { Router } from \"@angular/router\";\n// import { Post } from \"src/app/models/posts\";\n// import { LikesService } from \"src/app/services/LikesService.service\";\n// import { PostsService } from \"src/app/services/posts.service\";\nimport { __decorate } from \"tslib\";\n// @Component({\n//   selector: \"app-home\",\n//   templateUrl: \"./home.component.html\",\n//   styleUrls: [\"./home.component.css\"],\n// })\n// export class HomeComponent implements OnInit {\n//   time: string = new Date().toLocaleString();\n//   likes: number = 0;\n//   posts: Post[] = [];\n//   constructor(\n//     private postService: PostsService,\n//     private router: Router,\n//     private likesService: LikesService\n//   ) {}\n//   ngOnInit(): void {\n//     this.postService.getPosts().subscribe((posts: Post[]) => {\n//       this.posts = posts;\n//     });\n//     this.postService.getPosts().subscribe((posts: Post[]) => {\n//       this.posts = posts;\n//       for (const post of this.posts) {\n//         this.likesService.getLikes(post._id).subscribe((likes) => {\n//           post.likes = likes;\n//         });\n//       }\n//     });\n//   }\n//   postDetalis(_id: string): void {\n//     this.router.navigate([\"/content-page/detalis\", _id]);\n//   }\n//   addLike(postId: number) {\n//     const likes = this.getLikesFromStorage();\n//     likes[postId] = true;\n//     this.saveLikesToStorage(likes);\n//   }\n//   unlikePost(postId: number) {\n//     const likes = this.getLikesFromStorage();\n//     delete likes[postId];\n//     this.saveLikesToStorage(likes);\n//   }\n// }\nimport { Component } from \"@angular/core\";\nlet HomeComponent = class HomeComponent {\n  constructor(postsService, likesService) {\n    this.postsService = postsService;\n    this.likesService = likesService;\n    this.posts = [];\n    this.postLikes = {};\n  }\n  ngOnInit() {\n    this.postsService.getPosts().subscribe(posts => {\n      this.posts = posts;\n      for (const post of posts) {\n        this.likesService.getLikes(post._id).subscribe(likes => {\n          this.postLikes[post._id] = likes[post._id] || 0;\n        });\n      }\n    });\n  }\n  addLike(postId) {\n    this.postLikes[postId]++;\n    const likes = this.postLikes;\n    this.likesService.saveLikesToStorage(likes);\n  }\n  removeLike(postId) {\n    this.postLikes[postId]--;\n    const likes = this.postLikes;\n    this.likesService.saveLikesToStorage(likes);\n  }\n};\nHomeComponent = __decorate([Component({\n  selector: \"app-home\",\n  templateUrl: \"./home.component.html\",\n  styleUrls: [\"./home.component.css\"]\n})], HomeComponent);\nexport { HomeComponent };","map":{"version":3,"mappings":"AAAA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAASA,SAAS,QAAQ,eAAe;AAUlC,IAAMC,aAAa,GAAnB,MAAMA,aAAa;EAIxBC,YACUC,YAA0B,EAC1BC,YAA0B;IAD1B,iBAAY,GAAZD,YAAY;IACZ,iBAAY,GAAZC,YAAY;IALtB,UAAK,GAAW,EAAE;IAClB,cAAS,GAAiC,EAAE;EAKzC;EAEHC,QAAQ;IACN,IAAI,CAACF,YAAY,CAACG,QAAQ,EAAE,CAACC,SAAS,CAAEC,KAAK,IAAI;MAC/C,IAAI,CAACA,KAAK,GAAGA,KAAK;MAClB,KAAK,MAAMC,IAAI,IAAID,KAAK,EAAE;QACxB,IAAI,CAACJ,YAAY,CACdM,QAAQ,CAACD,IAAI,CAACE,GAAG,CAAC,CAClBJ,SAAS,CAAEK,KAAmC,IAAI;UACjD,IAAI,CAACC,SAAS,CAACJ,IAAI,CAACE,GAAG,CAAC,GAAGC,KAAK,CAACH,IAAI,CAACE,GAAG,CAAC,IAAI,CAAC;QACjD,CAAC,CAAC;;IAER,CAAC,CAAC;EACJ;EAEAG,OAAO,CAACC,MAAc;IACpB,IAAI,CAACF,SAAS,CAACE,MAAM,CAAC,EAAE;IACxB,MAAMH,KAAK,GAAG,IAAI,CAACC,SAAS;IAC5B,IAAI,CAACT,YAAY,CAACY,kBAAkB,CAACJ,KAAK,CAAC;EAC7C;EAEAK,UAAU,CAACF,MAAc;IACvB,IAAI,CAACF,SAAS,CAACE,MAAM,CAAC,EAAE;IACxB,MAAMH,KAAK,GAAG,IAAI,CAACC,SAAS;IAC5B,IAAI,CAACT,YAAY,CAACY,kBAAkB,CAACJ,KAAK,CAAC;EAC7C;CACD;AAjCYX,aAAa,eALzBD,SAAS,CAAC;EACTkB,QAAQ,EAAE,UAAU;EACpBC,WAAW,EAAE,uBAAuB;EACpCC,SAAS,EAAE,CAAC,sBAAsB;CACnC,CAAC,GACWnB,aAAa,CAiCzB;SAjCYA,aAAa","names":["Component","HomeComponent","constructor","postsService","likesService","ngOnInit","getPosts","subscribe","posts","post","getLikes","_id","likes","postLikes","addLike","postId","saveLikesToStorage","removeLike","selector","templateUrl","styleUrls"],"sourceRoot":"","sources":["/Users/igortsiumrak/Desktop/FinalProject/client/src/app/components/home/home.component.ts"],"sourcesContent":["// import { Component, OnInit } from \"@angular/core\";\n// import { Router } from \"@angular/router\";\n// import { Post } from \"src/app/models/posts\";\n// import { LikesService } from \"src/app/services/LikesService.service\";\n// import { PostsService } from \"src/app/services/posts.service\";\n\n// @Component({\n//   selector: \"app-home\",\n//   templateUrl: \"./home.component.html\",\n//   styleUrls: [\"./home.component.css\"],\n// })\n// export class HomeComponent implements OnInit {\n//   time: string = new Date().toLocaleString();\n//   likes: number = 0;\n\n//   posts: Post[] = [];\n//   constructor(\n//     private postService: PostsService,\n//     private router: Router,\n//     private likesService: LikesService\n//   ) {}\n//   ngOnInit(): void {\n//     this.postService.getPosts().subscribe((posts: Post[]) => {\n//       this.posts = posts;\n//     });\n//     this.postService.getPosts().subscribe((posts: Post[]) => {\n//       this.posts = posts;\n//       for (const post of this.posts) {\n//         this.likesService.getLikes(post._id).subscribe((likes) => {\n//           post.likes = likes;\n//         });\n//       }\n//     });\n//   }\n\n//   postDetalis(_id: string): void {\n//     this.router.navigate([\"/content-page/detalis\", _id]);\n//   }\n\n//   addLike(postId: number) {\n//     const likes = this.getLikesFromStorage();\n//     likes[postId] = true;\n//     this.saveLikesToStorage(likes);\n//   }\n\n//   unlikePost(postId: number) {\n//     const likes = this.getLikesFromStorage();\n//     delete likes[postId];\n//     this.saveLikesToStorage(likes);\n//   }\n// }\nimport { Component } from \"@angular/core\";\nimport { Post } from \"../../models/post\";\nimport { PostsService } from \"../../services/posts.service\";\nimport { LikesService } from \"../../services/likes.service\";\n\n@Component({\n  selector: \"app-home\",\n  templateUrl: \"./home.component.html\",\n  styleUrls: [\"./home.component.css\"],\n})\nexport class HomeComponent {\n  posts: Post[] = [];\n  postLikes: { [postId: number]: number } = {};\n\n  constructor(\n    private postsService: PostsService,\n    private likesService: LikesService\n  ) {}\n\n  ngOnInit(): void {\n    this.postsService.getPosts().subscribe((posts) => {\n      this.posts = posts;\n      for (const post of posts) {\n        this.likesService\n          .getLikes(post._id)\n          .subscribe((likes: { [postId: number]: number }) => {\n            this.postLikes[post._id] = likes[post._id] || 0;\n          });\n      }\n    });\n  }\n\n  addLike(postId: number): void {\n    this.postLikes[postId]++;\n    const likes = this.postLikes;\n    this.likesService.saveLikesToStorage(likes);\n  }\n\n  removeLike(postId: number): void {\n    this.postLikes[postId]--;\n    const likes = this.postLikes;\n    this.likesService.saveLikesToStorage(likes);\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}